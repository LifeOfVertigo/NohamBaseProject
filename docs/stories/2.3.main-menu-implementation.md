# Story 2.3: Main Menu Implementation

**Status:** Draft

## Story

**As a** player,
**I want** a functional main menu with New Game, Continue, Settings, and Quit options,
**so that** I can navigate the game's primary functions through an intuitive interface.

## Acceptance Criteria

1. Main menu UI created using shadcn components within NEON widget
2. Menu options (New Game, Continue, Settings, Quit) functional and properly routed
3. Menu navigation supports both keyboard/mouse and gamepad input
4. Visual design follows modern UI patterns while fitting indie game aesthetic
5. Menu transitions smooth and performant (maintains target FPS)

## Tasks / Subtasks

- [ ] Create MainMenuComponent structure (AC: 1)
  - [ ] Implement MainMenuComponent class using shadcn components
  - [ ] Create menu layout using GameCard and GameButton components
  - [ ] Implement menu container with proper centering
  - [ ] Style menu according to game aesthetic
- [ ] Implement menu navigation functionality (AC: 2)
  - [ ] Create NEON router for menu navigation
  - [ ] Implement New Game button functionality
  - [ ] Implement Continue button (with save game detection)
  - [ ] Implement Settings button routing
  - [ ] Implement Quit button with confirmation dialog
- [ ] Add multi-platform input support (AC: 3)
  - [ ] Integrate with InputManagerSubsystem for input mode detection
  - [ ] Implement keyboard navigation (arrow keys, Enter, Escape)
  - [ ] Implement gamepad navigation (D-pad, A/B buttons)
  - [ ] Add input prompt updates based on active device
  - [ ] Test Steam Deck compatibility
- [ ] Apply visual design and theming (AC: 4)
  - [ ] Implement game-specific theme in shadcn components
  - [ ] Add indie game aesthetic styling
  - [ ] Ensure visual consistency with overall design
  - [ ] Test visual design across different resolutions
- [ ] Optimize performance and transitions (AC: 5)
  - [ ] Implement smooth menu transitions with Framer Motion
  - [ ] Optimize rendering performance for target FPS
  - [ ] Test performance across different hardware
  - [ ] Ensure transitions maintain 60 FPS target

## Dev Notes

**Tech Stack Reference:**
- NEON widget containers for menu hosting [Source: architecture/tech-stack.md]
- shadcn/ui components for professional UI elements [Source: architecture/tech-stack.md]
- Framer Motion 11.x for smooth animations [Source: architecture/tech-stack.md]
- Steam Input for multi-platform input handling [Source: architecture/tech-stack.md]

**Project Structure:**
- MainMenu components: `Content/UI/NEON/MainMenu/` [Source: architecture/source-tree.md]
- UMG widget containers: `Content/UI/Widgets/` [Source: architecture/source-tree.md]
- Component utilities: `Content/UI/NEON/Utils/` [Source: architecture/source-tree.md]

**MainMenuComponent Architecture:**
- Primary game entry point with navigation capabilities [Source: architecture/components.md]
- Key interfaces: navigateToGame(), navigateToSettings(), exitGame(), handleSteamOverlay() [Source: architecture/components.md]
- Dependencies: shadcn Button, Card components, NEON bridge communication [Source: architecture/components.md]
- Technology: HTML5, shadcn/ui, Tailwind CSS, Vanilla JavaScript [Source: architecture/components.md]

**Router Architecture:**
- NEONRouter class for hash-based routing [Source: architecture/frontend-architecture.md]
- Menu history management for back navigation [Source: architecture/frontend-architecture.md]
- Route transition handling with component show/hide [Source: architecture/frontend-architecture.md]
- UE5 notification via NEON.invokeUnreal('menuTransition') [Source: architecture/frontend-architecture.md]

**State Management:**
- GameStateManager for centralized state [Source: architecture/frontend-architecture.md]
- currentMenu, menuHistory, inputMode tracking [Source: architecture/frontend-architecture.md]
- NEON listeners for input mode changes [Source: architecture/frontend-architecture.md]

**InputManagerSubsystem Integration:**
- Multi-platform input detection and controller switching [Source: architecture/components.md]
- Key interfaces: GetCurrentInputMode(), UpdateInputPrompts(), GetInputPromptsForUI() [Source: architecture/components.md]
- Steam Input API integration for controller support [Source: architecture/components.md]

**Coding Standards:**
- NEON Communication must go through NEONBridgeSubsystem [Source: architecture/coding-standards.md]
- JavaScript Files use kebab-case naming [Source: architecture/coding-standards.md]
- NEON Events use camelCase naming [Source: architecture/coding-standards.md]
- All input detection must route through InputManagerSubsystem [Source: architecture/coding-standards.md]

**Previous Story Context:**
Story 2.2 completed shadcn component integration, providing the UI component foundation for main menu implementation.

### Testing

**Testing Approach:**
- Jest + Testing Library for component functionality [Source: architecture/tech-stack.md]
- Manual testing for input devices and navigation [Source: architecture/tech-stack.md]
- Performance testing for FPS maintenance [Source: architecture/tech-stack.md]
- UE5 PIE for full game flow testing [Source: architecture/tech-stack.md]

**Key Test Scenarios:**
- All menu buttons function correctly
- Navigation works with keyboard and gamepad
- Menu transitions are smooth and performant
- Visual design meets requirements

**Success Criteria:**
- Main menu displays and functions correctly
- All navigation options work as expected
- Input switching seamless between devices
- Performance maintains target FPS

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2024-01-01 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record

### Agent Model Used
_To be filled by development agent_

### Debug Log References
_To be filled by development agent_

### Completion Notes List
_To be filled by development agent_

### File List
_To be filled by development agent_

## QA Results

_To be filled by QA agent_