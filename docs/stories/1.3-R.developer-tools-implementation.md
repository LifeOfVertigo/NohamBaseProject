# Story 1.3-R: Developer Tools Implementation (Complete)

## Status
Cancelled - Using UE5 built-in developer tools instead

## Story
**As a** developer,
**I want** essential development tools and debugging capabilities integrated into the base project,
**so that** I can efficiently develop and troubleshoot during foundation building and all subsequent development phases.

## Context
Story 1.3 was **NOT IMPLEMENTED** in original Epic 1 work. This story implements the complete developer tools subsystem from scratch per original Story 1.3 specification.

**CRITICAL:** This story has ZERO existing implementation. All work is new development.

## Acceptance Criteria
1. `UNohamDeveloperToolsSubsystem` created and functional with basic framework
2. Performance monitoring framework established (FPS display, memory usage)
3. Debug logging system configured with appropriate verbosity levels
4. Basic collision visualization tools available
5. Development menu accessible via F1 key (NEON placeholder for Epic 2)
6. Console commands implemented for time scale, debug toggles, and log verbosity
7. All developer code conditionally compiled with `#if WITH_EDITOR` where appropriate

## Tasks / Subtasks

### Create DeveloperToolsSubsystem Framework (AC: 1)
- [ ] Create `Noham_Base_Proj_Cpp/Source/Noham_Base_Proj_Cpp/Public/Subsystems/Developer/NohamDeveloperToolsSubsystem.h`
  - Inherit from `UEngineSubsystem` for global access
  - Add UCLASS macro with appropriate specifiers
  - Declare Initialize() and Deinitialize() override functions
  - Add bIsPerformanceMonitorEnabled boolean property
  - Add bIsCollisionDebugEnabled boolean property
  - Forward declare performance monitor class
- [ ] Create `Noham_Base_Proj_Cpp/Source/Noham_Base_Proj_Cpp/Private/Subsystems/Developer/NohamDeveloperToolsSubsystem.cpp`
  - Implement constructor with default values
  - Implement Initialize() - setup developer systems
  - Implement Deinitialize() - cleanup developer systems
  - Add subsystem tick function for per-frame updates
  - Implement performance monitor creation and management

### Implement Performance Monitoring (AC: 2)
- [ ] Create `Noham_Base_Proj_Cpp/Public/Subsystems/Developer/NohamPerformanceMonitor.h`
  - UCLASS inheriting from UObject
  - Properties for FPS tracking (current, average, min, max)
  - Properties for memory usage (current, peak)
  - Properties for frame time (current, average)
  - Functions: UpdateMetrics(), ResetStats(), GetFPS(), GetMemoryUsageMB()
- [ ] Create `Noham_Base_Proj_Cpp/Private/Subsystems/Developer/NohamPerformanceMonitor.cpp`
  - Implement FPS calculation using UE5 stats system
  - Implement memory tracking using FPlatformMemory::GetStats()
  - Implement frame time tracking using delta time accumulation
  - Add rolling average calculations (30 frame window)
  - Implement stat reset functionality
- [ ] Create on-screen debug display integration
  - Use GEngine->AddOnScreenDebugMessage for temporary display
  - Format: "FPS: XX.X | Frame: X.XXms | Memory: XXXMb"
  - Toggle on/off with performance monitor enabled flag
  - Update every frame when enabled

### Implement Logging System (AC: 3)
- [ ] Define logging categories in `Noham_Base_Proj_Cpp/Noham_Base_Proj_Cpp.h`
  - Add DECLARE_LOG_CATEGORY_EXTERN for NohamDeveloper category
  - Add DECLARE_LOG_CATEGORY_EXTERN for NohamPerformance category
  - Add DECLARE_LOG_CATEGORY_EXTERN for NohamSubsystems category
  - Add DECLARE_LOG_CATEGORY_EXTERN for NohamInput category (future use)
  - Add DECLARE_LOG_CATEGORY_EXTERN for NohamNEON category (future use)
- [ ] Implement logging categories in `Noham_Base_Proj_Cpp/Noham_Base_Proj_Cpp.cpp`
  - DEFINE_LOG_CATEGORY for all declared categories
  - Set default verbosity levels (Log for most, Verbose for Performance)
- [ ] Create logging helper macros in NohamDeveloperToolsSubsystem.h
  - UE_LOG wrapper macros for common patterns
  - Conditional logging macros (only log in editor builds)
  - Performance logging macros with automatic timing
- [ ] Configure default log output settings
  - Ensure logs output to both console and log files
  - Set appropriate verbosity in DefaultEngine.ini
  - Document log categories in developer documentation

### Implement Collision Visualization (AC: 4)
- [ ] Create `Noham_Base_Proj_Cpp/Public/Subsystems/Developer/NohamCollisionDebugger.h`
  - UCLASS inheriting from UObject
  - Properties for visualization settings (color, duration, thickness)
  - Functions: EnableDebug(), DisableDebug(), ToggleDebug()
  - Enum for debug draw types (Simple, Complex, All)
- [ ] Create `Noham_Base_Proj_Cpp/Private/Subsystems/Developer/NohamCollisionDebugger.cpp`
  - Implement collision debug drawing using DrawDebugHelpers
  - Draw collision boxes, spheres, capsules with different colors
  - Implement persistent vs temporary drawing modes
  - Add filtering by collision channel
  - Integrate with UE5's "show collision" command
- [ ] Add collision visualization toggle to DeveloperToolsSubsystem
  - Store reference to NohamCollisionDebugger instance
  - Create/destroy debugger based on enabled state
  - Provide accessor functions for other systems

### Implement Console Commands (AC: 6)
- [ ] Create console command: SetTimeScale
  - UFUNCTION with Exec specifier in DeveloperToolsSubsystem
  - Parameter: float NewTimeScale (clamped 0.01 to 10.0)
  - Calls UGameplayStatics::SetGlobalTimeDilation
  - Log time scale changes to NohamDeveloper category
  - Add help text with UFUNCTION meta
- [ ] Create console command: TogglePerformanceMonitor
  - UFUNCTION with Exec specifier
  - Toggles bIsPerformanceMonitorEnabled flag
  - Shows/hides on-screen performance display
  - Logs toggle state
- [ ] Create console command: ToggleCollisionDebug
  - UFUNCTION with Exec specifier
  - Toggles bIsCollisionDebugEnabled flag
  - Enables/disables collision visualization
  - Logs toggle state
- [ ] Create console command: SetLogVerbosity
  - UFUNCTION with Exec specifier
  - Parameters: FString CategoryName, FString VerbosityLevel
  - Dynamically changes log verbosity at runtime
  - Supports categories: NohamDeveloper, NohamPerformance, NohamSubsystems
  - Supports levels: None, Fatal, Error, Warning, Display, Log, Verbose, All
  - Validates input and logs errors for invalid values
- [ ] Create console command: ResetPerformanceStats
  - UFUNCTION with Exec specifier
  - Resets FPS/memory/frame time tracking
  - Clears min/max values
  - Logs reset confirmation

### Create F1 Developer Menu Placeholder (AC: 5)
- [ ] Add F1 key binding to DeveloperToolsSubsystem
  - Use enhanced input system (create DeveloperInput assets in Epic 2)
  - For now: simple key binding in subsystem tick
  - Toggle bIsDeveloperMenuOpen flag
- [ ] Create placeholder developer menu widget
  - Simple UMG widget for now (NEON version in Epic 2)
  - Display: "Developer Tools Menu (Placeholder - NEON implementation in Epic 2)"
  - Show current performance stats
  - Show toggle buttons for: Performance Monitor, Collision Debug
  - Show time scale slider
  - Show log verbosity dropdowns
- [ ] Implement menu show/hide logic
  - Create widget on F1 press if not exists
  - Add to viewport when shown
  - Remove from viewport when hidden
  - Toggle state with repeated F1 presses

### Conditional Compilation (AC: 7)
- [ ] Wrap development-only code with preprocessor directives
  - Use `#if WITH_EDITOR` for editor-only features
  - Use `#if !UE_BUILD_SHIPPING` for development/debug features
  - Ensure shipping builds don't include debug overhead
- [ ] Add preprocessor guards to:
  - DeveloperToolsSubsystem class definition (allow in non-shipping)
  - Performance monitor on-screen display (editor only)
  - Collision debugger (allow in non-shipping)
  - Console commands (allow in non-shipping)
  - F1 menu toggle (editor only)
- [ ] Document conditional compilation strategy
  - Add comments explaining what's compiled in each build type
  - Note performance impact of each feature
  - Document how to enable features in specific builds if needed

### Update Build Configuration (AC: 1)
- [ ] Update `Noham_Base_Proj_Cpp/Noham_Base_Proj_Cpp.Build.cs`
  - No new module dependencies needed (using Engine modules)
  - Verify EnhancedInput already included (for future F1 binding)
  - Verify UMG already included (for placeholder menu)
  - Add comments documenting developer tools dependencies
- [ ] Regenerate project files after creating new classes
  - Right-click .uproject â†’ Generate Visual Studio project files
  - Verify all new files appear in VS solution

### Testing (AC: 1-7)
- [ ] Test DeveloperToolsSubsystem initialization
  - Verify subsystem created on engine startup
  - Check Initialize() called correctly
  - Verify no errors in log during startup
- [ ] Test performance monitoring
  - Enable monitor via console command
  - Verify FPS display appears on screen
  - Verify memory usage updates correctly
  - Test ResetPerformanceStats command
- [ ] Test collision visualization
  - Toggle collision debug via console
  - Verify collision shapes render correctly
  - Test different collision types (boxes, spheres, capsules)
- [ ] Test console commands
  - Execute each command with valid parameters
  - Test error handling with invalid parameters
  - Verify commands logged to appropriate categories
  - Test SetTimeScale with various values
  - Test SetLogVerbosity with different categories/levels
- [ ] Test F1 developer menu
  - Press F1 to toggle menu visibility
  - Verify menu shows current performance stats
  - Test menu controls (toggles, sliders)
  - Verify menu hides on F1 press again
- [ ] Test conditional compilation
  - Build in Development Editor - all features available
  - Build in Shipping - verify debug code stripped
  - Verify no performance overhead in shipping builds
- [ ] Test integration with existing systems
  - Verify logging works with existing character logs
  - Test performance monitor with PIE session
  - Verify no conflicts with UE5 built-in stats

### Documentation (AC: 1-7)
- [ ] Create `docs/developer-tools/README.md`
  - Overview of developer tools subsystem
  - List of available console commands with examples
  - Performance monitoring guide
  - Collision debugging guide
  - F1 menu usage instructions
  - Logging categories and verbosity levels
- [ ] Update main README.md
  - Add Developer Tools section
  - Document F1 key functionality
  - List console commands quick reference
- [ ] Create code comments and inline documentation
  - Document each console command with usage examples
  - Add header comments to all new classes
  - Document performance monitoring metrics
  - Explain conditional compilation strategy

## Dev Notes

### ðŸš¨ CRITICAL: NEW IMPLEMENTATION
This story has **ZERO existing code**. All classes, functions, and systems must be created from scratch.

**DIRECTORY STRUCTURE READY:**
- `Private/Subsystems/Developer/` - created in Story 1.1-R
- `Public/Subsystems/Developer/` - created in Story 1.1-R

**FILES TO CREATE:**
```
Public/Subsystems/Developer/
â”œâ”€â”€ NohamDeveloperToolsSubsystem.h      [NEW]
â”œâ”€â”€ NohamPerformanceMonitor.h           [NEW]
â””â”€â”€ NohamCollisionDebugger.h            [NEW]

Private/Subsystems/Developer/
â”œâ”€â”€ NohamDeveloperToolsSubsystem.cpp    [NEW]
â”œâ”€â”€ NohamPerformanceMonitor.cpp         [NEW]
â””â”€â”€ NohamCollisionDebugger.cpp          [NEW]
```

### Architecture Context
[Source: docs/architecture/backend-architecture.md, docs/architecture/coding-standards.md]

**Subsystem Pattern:**
- Inherit from `UEngineSubsystem` for global access
- Override `Initialize()` and `Deinitialize()` for lifecycle management
- Use `ShouldCreateSubsystem()` to control creation in different build types
- Access via `GEngine->GetEngineSubsystem<UNohamDeveloperToolsSubsystem>()`

**Console Command Pattern:**
```cpp
UFUNCTION(Exec, meta = (CallInEditor = "true"))
void SetTimeScale(float NewTimeScale);
```

**Logging Pattern:**
```cpp
// In header
DECLARE_LOG_CATEGORY_EXTERN(LogNohamDeveloper, Log, All);

// In cpp
DEFINE_LOG_CATEGORY(LogNohamDeveloper);

// Usage
UE_LOG(LogNohamDeveloper, Display, TEXT("Performance monitor enabled"));
```

**Conditional Compilation Pattern:**
```cpp
#if WITH_EDITOR
    // Editor-only code (F1 menu toggle)
#endif

#if !UE_BUILD_SHIPPING
    // Development/Debug code (performance monitor, console commands)
#endif
```

### Tech Stack Integration
[Source: docs/architecture/tech-stack.md]

**Required UE5 Systems:**
- **Stats System**: For FPS and performance metrics
- **Console Command System**: For Exec functions
- **Logging System**: For categorized debug output
- **DrawDebugHelpers**: For collision visualization
- **UMG**: For placeholder developer menu (temporary until NEON)

**Performance Budgets:**
- Performance monitor overhead: < 0.1ms per frame
- Collision debug overhead: Varies by scene complexity
- Console command execution: Negligible
- All debug features stripped in shipping builds

### UE5 C++ Reference
[Source: docs/unreal-engine/]

**Relevant Documentation:**
- [Subsystems](docs/unreal-engine/core-systems/objects.md) - Subsystem lifecycle
- [Common Patterns](docs/unreal-engine/quick-reference/common-patterns.md) - Console commands
- [Essential Macros](docs/unreal-engine/quick-reference/macros.md) - UFUNCTION, UPROPERTY

**Code Examples:**

**Engine Subsystem:**
```cpp
UCLASS()
class UNohamDeveloperToolsSubsystem : public UEngineSubsystem
{
    GENERATED_BODY()

public:
    virtual void Initialize(FSubsystemCollectionBase& Collection) override;
    virtual void Deinitialize() override;

    UFUNCTION(Exec)
    void TogglePerformanceMonitor();
};
```

**Performance Monitoring:**
```cpp
float CurrentFPS = 1.0f / DeltaTime;
FPlatformMemoryStats MemStats = FPlatformMemory::GetStats();
uint64 UsedMemoryMB = MemStats.UsedPhysical / (1024 * 1024);
```

**Collision Debug Drawing:**
```cpp
DrawDebugBox(GetWorld(), Center, Extent, FColor::Green, false, 0.1f, 0, 2.0f);
DrawDebugSphere(GetWorld(), Center, Radius, 12, FColor::Blue, false, 0.1f);
```

### Testing Checklist
- [ ] Subsystem initializes without errors
- [ ] Performance monitor displays correct FPS
- [ ] Memory tracking updates in real-time
- [ ] Collision debug shows all collision shapes
- [ ] Console commands execute without errors
- [ ] Time scale affects gameplay correctly
- [ ] Log verbosity changes take effect
- [ ] F1 menu toggles visibility
- [ ] All features compile in Development Editor
- [ ] Shipping build strips all debug code
- [ ] No performance impact when disabled
- [ ] Integration with UE5 built-in stats works

### Future Epic 2 Integration Notes
**NEON Developer Menu:**
- Current UMG placeholder will be replaced with NEON HTML/CSS/JS menu
- F1 toggle logic will remain in subsystem
- Menu will use shadcn components for professional UI
- Performance data will be sent to NEON via bridge
- All toggle/slider controls will communicate through NEON bridge

**Keep for NEON Transition:**
- DeveloperToolsSubsystem core logic
- Performance monitoring data structures
- Console command implementations
- Logging system

**Replace in NEON Transition:**
- UMG placeholder widget â†’ NEON HTML widget
- On-screen debug text â†’ NEON HUD overlay
- Simple toggles â†’ shadcn switch components

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-25 | 1.0 | Initial implementation story creation | James (Developer) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent - should include:*
- CREATED: NohamDeveloperToolsSubsystem.h/.cpp
- CREATED: NohamPerformanceMonitor.h/.cpp
- CREATED: NohamCollisionDebugger.h/.cpp
- MODIFIED: Noham_Base_Proj_Cpp.h (logging categories)
- MODIFIED: Noham_Base_Proj_Cpp.cpp (logging definitions)
- CREATED: docs/developer-tools/README.md
- MODIFIED: README.md (developer tools section)

## QA Results
*Results from QA Agent review will be populated here*
